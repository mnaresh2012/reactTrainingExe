<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="robots" content="noindex, nofollow">

    <title>Circle Anim- async</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="https://d3js.org/d3.v4.min.js"></script>
</head>
<body>
    <svg width="960" height="500"></svg>
</body>
<script type="application/javascript">

    const fs = require('fs');
    
    fs.readFile('chicagocrimes-1','utf-8',(err, data) => {
        if (err) {
            console.log(`ERROR : ${err}`);
        } else {
            const cvs = data;
        }
    });

    var data = JSONConversion(cvs);

    console.log(data);

    function JSONConversion(cvsText) {
        var a = [],
            b = cvsText.split("\n"),
            c,
            k,
            e = [];

        for (var i = 1; i < b.length; i++) { 
            k  = b[0].split(",");
            c  = b[i].split(",");
            var d = {};
            for (var j = 0; j < c.length; j++) { 
                var key = k[j];
                d[key] = c[j];
            }
            e.push(d);
        }
        return e;
    };




</script>
</html>